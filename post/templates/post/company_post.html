{% extends 'company/company_base.html' %}

{% block title %}Post Details{% endblock %}

{% block postactive %}active{% endblock %}

{% block side_content %}
    {% include 'company/company_info.html' %}
    <div class="panel panel-default secondary-panel">
        <div class="panel-heading">
            <h4 style="text-align: center;color: white">Applicants</h4>
        </div>
        <div class="panel-body">
            <a class="btn regular-btn btn-block"
               href="{% url 'post:applicants' pk=post.pk%}">View Post Applicants ({{ count }})</a>
            <table class="table margined">
                <tr>
                    <th>Name</th>
                    <th>School</th>
                    <th>Date Applied</th>
                </tr>
                {% for x in applicants %}
                    <tr {% if x.cover_opened %} style="background-color: #96beff;"
                    {% elif x.cover_submitted %} style="background-color: #c2f9ce"
                    {% elif x.cover_requested %} style="background-color: #fdffb2;"
                    {% endif %}>
                        <td>{{ x.fname }} {{ x.lname }}</td>
                        <td>{{ x.school }}</td>
                        <td>{{ x.date_applied }}</td>
                    </tr>
                {% endfor %}
            </table>
        </div>
    </div>
    {% include 'company/applicant_legend.html' %}
{% endblock %}

{% block content %}
    <div class="panel panel-default primary-panel">
        <div class="panel-heading">
            <h4>{{ post.title }}</h4>
        </div>
        <div class="panel-body">
            <label>Post Status:</label><span> {{ post.status }}</span>
            <a style="color: red;" href="#" class="warning-open">Close Post</a>
            <div class="warning alert alert-warning hidden">
                <h4>Are you sure you want to delete <u>{{ post.title }}</u> post?</h4>
                <hr/>
                <p>This will permanently delete this post and close all remaining applications.<br/>
                <b>Note:</b> posts are closed automatically when the start date is reached.</p>
                <button class="warning-close btn regular-btn" type="button">Cancel</button>
                <a class="btn danger-btn" href="{% url 'post:close' post.pk %}">Close Post</a>
            </div>
            <br/>
            <label>Start Date: </label><span> {{ post.start_date }}</span><br/>
            <label>End Date: </label><span> {{ post.end_date }}</span><br/>
            <label>Application Deadline: </label><span> {{ post.deadline }}</span><br/>
            <label>Wage: </label><span> {{ post.wage }}</span><br/>
            <label>Openings: </label><span> {{ post.openings }}</span><br/>
            <label>Description: </label><p>{{ post.description }}</p>
            <label>Requirements: </label><p>{{ post.requirements }}</p>
            <label>Schools: </label><p>{{ post.schools }}</p>
            <label>Programs: </label><p>{{ post.programs }}</p>
            <a class="btn regular-btn" href="{% url 'post:companyposts' %}">Back to list</a>
            <a class="btn regular-btn" href="{% url 'post:update' pk=post.pk %}">Edit</a>
        </div>
    </div>
{% endblock %}