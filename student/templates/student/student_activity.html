{% extends 'student/student_base.html' %}

{% block title %}User Activity{% endblock %}

{% block historyactive %}active{% endblock %}

{% block scripts %}
    {% load staticfiles %}
    <script src="{% static 'home/page_script.js' %}"></script>
{% endblock %}

{% block content %}

    <div class="w3-container">
        <div class="w3-card-4 w3-white">
            <header class="w3-container title-color w3-text-white">
                <h4 class="w3-center">Applications History</h4>
            </header>
            {% if acount > 0 %}
                <table class="w3-table">
                    <thead>
                    <tr>
                        <th>Date</th>
                        <th>Company</th>
                        <th>Post</th>
                        <th>Status</th>
                    </tr>
                    </thead>
                    <tbody>
                        {% for x in applications %}
                            <tr>
                                <td>{{ x.date }}</td>
                                <td>{{ x.post.company }}</td>
                                <td>{{ x.post_title }}</td>
                                <td>{{ x.status }}</td>
                            </tr>
                        {% endfor %}
                        <tr>
                            <td colspan="4">
                                <span>Page: </span><span class="hide page-object">app_page</span>
                                {% for x in apages %}
                                    {% if x == apage %}
                                        <strong><span>{{ x }} </span></strong>
                                    {% else %}
                                        <span class="app-page-number page-number">{{ x }} </span>
                                    {% endif %}|
                                {% endfor %}
                            </td>
                        </tr>
                    </tbody>
                </table>
            {% else %}
                <div class="warning-message message">
                    <p>You currently don't have any applications <a href="{% url 'post:studentposts' pk=0 pt='internship'%}">Click Here</a>
                        to apply for jobs of your choice.</p>
                </div>
            {% endif %}
        </div>
        <div class="w3-card-4 w3-white margined">
            <header class="w3-container title-color w3-text-white">
                <h4 class="w3-center">Events History</h4>
            </header>
            {% if ecount > 0 %}
                <table class="w3-table">
                    <thead>
                    <tr>
                        <th>Date</th>
                        <th>Company</th>
                        <th>Title</th>
                    </tr>
                    </thead>
                    <tbody>
                        {% for x in events %}
                            <tr>
                                <td>{{ x.date }}</td>
                                <td>{{ x.company }}</td>
                                <td>{{ x.title }}</td>
                            </tr>
                        {% endfor %}
                        <tr>
                            <td colspan="4">
                                <span>Page: </span><span class="hide page-object">event_page</span>
                                {% for x in epages %}
                                    {% if x == epage %}
                                        <strong><span>{{ x }} </span></strong>
                                    {% else %}
                                        <span class="app-page-number page-number">{{ x }} </span>
                                    {% endif %}|
                                {% endfor %}
                            </td>
                        </tr>
                    </tbody>
                </table>
            {% else %}
                <div class="warning-message message">
                    <p>You haven't expressed interest in any events <a href="{% url 'event:studentevents' pk=0%}">Click Here</a>
                        to check out some events.</p>
                </div>
            {% endif %}
        </div>
        <div class="w3-card-4 margined">
            <header class="w3-container title-color w3-text-white">
                <h5 class="w3-center">Notification History</h5>
            </header>
            {% if ncount > 0 %}
                <div class="w3-container">
                    {% for x in all_notifications %}
                        <span>{{ x.date }}</span>
                        <p>{{ x.message }}</p>
                        <hr/>
                    {% endfor %}
                </div>
                <div class="w3-container">
                    <span>Page: </span><span class="hide page-object">note_page</span>
                    {% for x in npages %}
                        {% if x == npage %}
                            <strong><span>{{ x }} </span></strong>
                        {% else %}
                            <span class="app-page-number page-number">{{ x }} </span>
                        {% endif %}|
                    {% endfor %}
                </div>
            {% else %}
                <div class="warning-message message">
                    <p>You have no notifications in your notification history.</p>
                </div>
            {% endif %}

        </div>
        <div class="hide">
            <form id="page-form" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <input id="note_page" type="number" name="note_page" value="{{ npage }}"/>
                <input id="app_page" type="number" name="app_page" value="{{ apage }}"/>
                <input id="event_page" type="number" name="event_page" value="{{ epage }}"/>
            </form>
            <div id="page-ids">note_page,app_page,event_page</div>
            <div id="current-note_page">{{ npage }}</div>
            <div id="current-app_page">{{ apage }}</div>
            <div id="current-event_page">{{ epage }}</div>
            <div id="form-id">page-form</div>
        </div>
    </div>
{% endblock %}

{% block page_name %}history{% endblock %}